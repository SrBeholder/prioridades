<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Lista de Prioridades</title>
        
        <!-- Código do YUI -->
        <script src="https://yui-s.yahooapis.com/3.18.1/build/yui/yui-min.js"></script>
        <script charset="utf-8" id="yui_3_18_1_1_1589570823906_2" src="https://yui-s.yahooapis.com/combo?3.18.1/oop/oop-min.js&amp;3.18.1/event-custom-base/event-custom-base-min.js&amp;3.18.1/event-base/event-base-min.js&amp;3.18.1/dom-core/dom-core-min.js&amp;3.18.1/dom-base/dom-base-min.js&amp;3.18.1/selector-native/selector-native-min.js&amp;3.18.1/selector/selector-min.js&amp;3.18.1/node-core/node-core-min.js&amp;3.18.1/dom-style/dom-style-min.js&amp;3.18.1/node-base/node-base-min.js&amp;3.18.1/event-delegate/event-delegate-min.js&amp;3.18.1/node-event-delegate/node-event-delegate-min.js&amp;3.18.1/pluginhost-base/pluginhost-base-min.js&amp;3.18.1/pluginhost-config/pluginhost-config-min.js&amp;3.18.1/node-pluginhost/node-pluginhost-min.js&amp;3.18.1/dom-screen/dom-screen-min.js&amp;3.18.1/node-screen/node-screen-min.js&amp;3.18.1/node-style/node-style-min.js&amp;3.18.1/attribute-core/attribute-core-min.js&amp;3.18.1/event-custom-complex/event-custom-complex-min.js&amp;3.18.1/attribute-observable/attribute-observable-min.js&amp;3.18.1/attribute-extras/attribute-extras-min.js&amp;3.18.1/attribute-base/attribute-base-min.js&amp;3.18.1/base-core/base-core-min.js" async=""></script><script charset="utf-8" id="yui_3_18_1_1_1589570823906_3" src="https://yui-s.yahooapis.com/combo?3.18.1/base-observable/base-observable-min.js&amp;3.18.1/base-base/base-base-min.js&amp;3.18.1/base-pluginhost/base-pluginhost-min.js&amp;3.18.1/base-build/base-build-min.js&amp;3.18.1/yui-throttle/yui-throttle-min.js&amp;3.18.1/classnamemanager/classnamemanager-min.js&amp;3.18.1/dd-ddm-base/dd-ddm-base-min.js&amp;3.18.1/selector-css2/selector-css2-min.js&amp;3.18.1/dd-drag/dd-drag-min.js&amp;3.18.1/dd-constrain/dd-constrain-min.js&amp;3.18.1/dd-proxy/dd-proxy-min.js&amp;3.18.1/event-synthetic/event-synthetic-min.js&amp;3.18.1/event-resize/event-resize-min.js&amp;3.18.1/dd-ddm/dd-ddm-min.js&amp;3.18.1/dd-ddm-drop/dd-ddm-drop-min.js&amp;3.18.1/dd-drop/dd-drop-min.js" async=""></script><link charset="utf-8" rel="stylesheet" id="yui_3_18_1_2_1589570823906_2" href="https://yui-s.yahooapis.com/combo?3.18.1/widget-base/assets/skins/sam/widget-base.css&amp;3.18.1/autocomplete-list/assets/skins/sam/autocomplete-list.css"><script charset="utf-8" id="yui_3_18_1_2_1589570823906_3" src="https://yui-s.yahooapis.com/combo?3.18.1/event-mouseenter/event-mouseenter-min.js&amp;3.18.1/event-hover/event-hover-min.js&amp;3.18.1/intl/intl-min.js&amp;3.18.1/array-extras/array-extras-min.js&amp;3.18.1/escape/escape-min.js&amp;3.18.1/event-focus/event-focus-min.js&amp;3.18.1/event-valuechange/event-valuechange-min.js&amp;3.18.1/autocomplete-base/autocomplete-base-min.js&amp;3.18.1/autocomplete-sources/autocomplete-sources-min.js&amp;3.18.1/autocomplete-list/lang/autocomplete-list_en.js&amp;3.18.1/selector-css3/selector-css3-min.js&amp;3.18.1/shim-plugin/shim-plugin-min.js&amp;3.18.1/attribute-complex/attribute-complex-min.js&amp;3.18.1/widget-base/widget-base-min.js&amp;3.18.1/widget-htmlparser/widget-htmlparser-min.js&amp;3.18.1/widget-skin/widget-skin-min.js&amp;3.18.1/widget-uievents/widget-uievents-min.js&amp;3.18.1/widget-position/widget-position-min.js&amp;3.18.1/widget-position-align/widget-position-align-min.js&amp;3.18.1/autocomplete-list/autocomplete-list-min.js&amp;3.18.1/autocomplete-list-keys/autocomplete-list-keys-min.js" async=""></script><script charset="utf-8" id="yui_3_18_1_2_1589570823906_4" src="https://yui-s.yahooapis.com/combo?3.18.1/autocomplete-plugin/autocomplete-plugin-min.js&amp;3.18.1/text-data-wordbreak/text-data-wordbreak-min.js&amp;3.18.1/text-wordbreak/text-wordbreak-min.js&amp;3.18.1/highlight-base/highlight-base-min.js&amp;3.18.1/autocomplete-highlighters/autocomplete-highlighters-min.js" async=""></script>

        <!-- Código do BS -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        
        <!-- Estilo próprio -->
        <link rel="stylesheet" href="estilo.css"  type="text/css">
    </head>
<body>
    <div class="cabecalho">
        <header class="inner">
          <h1 id="project_title">Prioridades</h1>
          <p id="project_tagline">Página criada para avaliar as prioridades do campus</p>         
        </header>
    </div>
    <!-- Form -->
    <div class="jumbotron" style="color: rgb(4, 24, 24);padding: 5px;">
        <br />
        <div class="caixa">
            <p>I - Digite seu nome:</p>
            <input id="nome" type="text" placeholder="Digite seu nome"></input>
        </div>
        <!-- Lista -->
        <div class="caixa" style="padding-bottom: 0px">
            <p>II - Ordene a lista de acordo com a sua prioridade (do mais importante para o menos importante)</p>
        </div>
        <div id="play" style="padding-top: 0px">
            <ul id="list1">
                <li class="list1">Item #1</li>
                <li class="list1">Item #2</li>
                <li class="list1">Item #3</li>
                <li class="list1">Item #4</li>
                <li class="list1">Item #5</li>
            </ul>
        </div>
        <div class="caixa">
            <p>III - Clique no botão de confirmação:</p>
            <input type="submit" value="Confirmar prioridade" onclick="formParaTexto()"></input>
        </div>
        <div class="caixa">
            <p>IV - Copie e cole o texto gerado para o wpp do César</p>
            <textarea id="textao" rows="4" cols="100" style="display: block;"></textarea>
        </div>
        <br />
    </div>
    <div class="container">
        
    </div>
    <!-- Código do texto -->
    <script type="text/javascript">
        function formParaTexto(){
            //captura nome e lista
            var nome = document.getElementById("nome")            
            var lista = document.getElementById("list1")            
            //trata texto
            var textAlt = nome.value
            lista.childNodes.forEach(filho => {
                if(typeof filho.innerText != 'undefined')
                textAlt = textAlt + "," + filho.innerText
            });             
            //captura textarea e atualiza valor
            var textao = document.getElementById("textao")
            textao.innerText = textAlt
        }
    </script>
    <!-- Código do YUI -->
    <script type="text/javascript">
        YUI().use('dd-constrain', 'dd-proxy', 'dd-drop', function(Y) {
            //Listen for all drop:over events
            Y.DD.DDM.on('drop:over', function(e) {
                //Get a reference to our drag and drop nodes
                var drag = e.drag.get('node'),
                    drop = e.drop.get('node');
    
                //Are we dropping on a li node?
                if (drop.get('tagName').toLowerCase() === 'li') {
                    //Are we not going up?
                    if (!goingUp) {
                        drop = drop.get('nextSibling');
                    }
                    //Add the node to this list
                    e.drop.get('node').get('parentNode').insertBefore(drag, drop);
                    //Resize this nodes shim, so we can drop on it later.
                    e.drop.sizeShim();
                }
            });
            //Listen for all drag:drag events
            Y.DD.DDM.on('drag:drag', function(e) {
                //Get the last y point
                var y = e.target.lastXY[1];
                //is it greater than the lastY var?
                if (y < lastY) {
                    //We are going up
                    goingUp = true;
                } else {
                    //We are going down.
                    goingUp = false;
                }
                //Cache for next check
                lastY = y;
            });
            //Listen for all drag:start events
            Y.DD.DDM.on('drag:start', function(e) {
                //Get our drag object
                var drag = e.target;
                //Set some styles here
                drag.get('node').setStyle('opacity', '.25');
                drag.get('dragNode').set('innerHTML', drag.get('node').get('innerHTML'));
                drag.get('dragNode').setStyles({
                    opacity: '.5',
                    borderColor: drag.get('node').getStyle('borderColor'),
                    backgroundColor: drag.get('node').getStyle('backgroundColor')
                });
            });
            //Listen for a drag:end events
            Y.DD.DDM.on('drag:end', function(e) {
                var drag = e.target;
                //Put our styles back
                drag.get('node').setStyles({
                    visibility: '',
                    opacity: '1'
                });
            });
            //Listen for all drag:drophit events
            Y.DD.DDM.on('drag:drophit', function(e) {
                var drop = e.drop.get('node'),
                    drag = e.drag.get('node');
    
                //if we are not on an li, we must have been dropped on a ul
                if (drop.get('tagName').toLowerCase() !== 'li') {
                    if (!drop.contains(drag)) {
                        drop.appendChild(drag);
                    }
                }
            });
    
            //Static Vars
            var goingUp = false, lastY = 0;
    
            //Get the list of li's in the lists and make them draggable
            var lis = Y.Node.all('#play ul li');
            lis.each(function(v, k) {
                var dd = new Y.DD.Drag({
                    node: v,
                    target: {
                        padding: '0 0 0 20'
                    }
                }).plug(Y.Plugin.DDProxy, {
                    moveOnEnd: false
                }).plug(Y.Plugin.DDConstrained, {
                    constrain2node: '#play'
                });
            });
    
            //Create simple targets for the 2 lists.
            var uls = Y.Node.all('#play ul');
            uls.each(function(v, k) {
                var tar = new Y.DD.Drop({
                    node: v
                });
            });
    
        });
    </script>
</body>
</html>
